(this.webpackJsonpfaceowl=this.webpackJsonpfaceowl||[]).push([[0],{17:function(e,t,a){e.exports=a.p+"static/media/Logo.a152100e.png"},19:function(e,t,a){e.exports=a(39)},24:function(e,t,a){},26:function(e,t,a){},31:function(e,t,a){},32:function(e,t,a){},33:function(e,t,a){},37:function(e,t,a){},39:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),s=a(11),o=a.n(s),r=(a(24),a(6)),l=a.n(r),c=a(1),m=a(2),u=a(4),d=a(3),p=a(8),h=a(5),g=(a(26),a(13)),b=a.n(g),f=a(9),w=a(7),v=a(10),E=function(e){var t=e.handleChange,a=e.label,n=Object(v.a)(e,["handleChange","label"]);return i.a.createElement("div",{className:"group mb2"},a?i.a.createElement("label",{className:"db fw6 lh-copy f4"},a):null,i.a.createElement("input",Object.assign({className:"br1 shadow-3 pa2 input-reset ba bg-transparent hover-bg-near-black hover-white b--black-60 w-100",onChange:t},n)))},y=function(e){var t=e.children,a=Object(v.a)(e,["children"]);return i.a.createElement("button",Object.assign({className:"mt2 b shadow-3 ph3 pv2 input-reset ba b--black white-80 bg-near-black grow pointer f4 dib"},a),t)},C=a(14),N=a.n(C),S=function(){return i.a.createElement("div",{className:"sweet-loading"},i.a.createElement(N.a,{className:"clip-loader",size:15,color:"#fbf1a9",loading:!0}))},k={email:"",password:"",isLoading:!1},I=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleChange=function(e){var t=e.target,n=t.value,i=t.name;a.setState(Object(w.a)({},i,n))},a.handleSubmit=function(e){var t,n,i;return l.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:!1,e.preventDefault(),t=a.state,n=t.email,i=t.password;try{fetch("https://agile-eyrie-66946.herokuapp.com/signin",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n,password:i})}).then((function(e){return e.json()})).then((function(e){e.id?(sessionStorage.setItem("userLog",JSON.stringify(e)),a.props.loadUser(e),a.props.onRouteChange("home")):alert("Wrong credentials!")}))}catch(o){console.log("error sign in user",o.message)}a.setState(Object(f.a)({},k,{isLoading:!0}));case 5:case"end":return s.stop()}}))},a.state=k,a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=sessionStorage.getItem("userLog");e&&(this.props.loadUser(JSON.parse(e)),this.props.onRouteChange("home"))}},{key:"render",value:function(){var e=this.props.onRouteChange;return i.a.createElement("div",{className:"flex flex-column flex-wrap"},i.a.createElement("article",{className:"bg-black-10 br3 ba b--black-10 mv3 w-100 w-50-m w-50-l mw6 shadow-5 center"},i.a.createElement("main",{className:"pa4 white-80"},i.a.createElement("div",{className:"measure"},i.a.createElement("fieldset",{id:"sign_up",className:"ba b--transparent ph0 mh0"},i.a.createElement("legend",{className:"mb2 cool f1 fw6 ph0 mh0"},"Sign In"),i.a.createElement("form",{onSubmit:this.handleSubmit},i.a.createElement(E,{name:"email",type:"email",value:this.state.email,handleChange:this.handleChange,label:"Email",required:!0}),i.a.createElement(E,{name:"password",type:"password",value:this.state.password,handleChange:this.handleChange,label:"Password",required:!0}),i.a.createElement("div",{className:"buttons"},i.a.createElement(y,{type:"submit"},"Sign In"))),i.a.createElement("div",{className:"lh-copy mt3"},i.a.createElement("p",{onClick:function(){return e("register")},className:"f6 link dim pointer white db"},"Register")))))),i.a.createElement("div",{className:"flex flex-column center"},this.state.isLoading?i.a.createElement(S,null):null))}}]),t}(n.Component),x={displayName:"",email:"",password:"",confirmPassword:"",isLoading:!1},j=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleSubmit=function(e){var t,n,i,s,o;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(e.preventDefault(),t=a.state,n=t.displayName,i=t.email,s=t.password,o=t.confirmPassword,s===o){r.next=5;break}return alert("Passwords don't match!"),r.abrupt("return");case 5:try{fetch("https://agile-eyrie-66946.herokuapp.com/register",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:n,email:i,password:s})}).then((function(e){return e.json()})).then((function(e){e.id?(a.props.loadUser(e),a.props.onRouteChange("home")):alert("The email address you have entered is already registered")}))}catch(l){console.log("error creating user",l.message)}a.setState(Object(f.a)({},x,{isLoading:!0}));case 7:case"end":return r.stop()}}))},a.handleChange=function(e){var t=e.target,n=t.value,i=t.name;a.setState(Object(w.a)({},i,n))},a.state=x,a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.state,t=e.displayName,a=e.email,n=e.password,s=e.confirmPassword;return i.a.createElement("div",{className:"flex flex-column flex-wrap"},i.a.createElement("article",{className:"bg-black-10 br3 ba b--black-10 mv3 w-100 w-50-m w-50-l mw6 shadow-5 center"},i.a.createElement("main",{className:"pa3 white-80"},i.a.createElement("div",{className:"measure"},i.a.createElement("fieldset",{id:"sign_up",className:"ba b--transparent ph0 mh0"},i.a.createElement("legend",{className:"mb2 cool f1 fw6 ph0 mh0"},"Register"),i.a.createElement("form",{className:"sign-up-form",onSubmit:this.handleSubmit},i.a.createElement(E,{name:"displayName",type:"text",value:t,handleChange:this.handleChange,label:"Name",required:!0}),i.a.createElement(E,{name:"email",type:"email",value:a,handleChange:this.handleChange,label:"Email",required:!0}),i.a.createElement(E,{name:"password",type:"password",value:n,handleChange:this.handleChange,label:"Password",required:!0}),i.a.createElement(E,{name:"confirmPassword",type:"password",value:s,handleChange:this.handleChange,label:"Confirm Password",required:!0}),i.a.createElement("div",{className:"buttons"},i.a.createElement(y,{type:"submit"},"Submit"))))))),i.a.createElement("div",{className:"flex flex-column center"},this.state.isLoading?i.a.createElement(S,null):null))}}]),t}(n.Component),O=function(e){var t=e.onRouteChange;return e.isSignedIn?i.a.createElement("nav",{style:{display:"flex",justifyContent:"flex-end"}},i.a.createElement("p",{onClick:function(){return t("signout")},className:"ma2 mt3 mr3 b shadow-3 ph3 pv2 input-reset ba b--black white-80 bg-near-black dim pointer f5 dib"}," Sign Out")):i.a.createElement("nav",{style:{display:"flex",justifyContent:"flex-end"}},i.a.createElement("p",{onClick:function(){return t("signin")},className:"ma2 mt3 b shadow-3 ph3 pv2 input-reset ba b--black white-80 bg-near-black dim pointer f5 dib"}," Sign In"),i.a.createElement("p",{onClick:function(){return t("register")},className:"ma2 mt3 mr3 b shadow-3 ph3 pv2 input-reset ba b--black white-80 bg-near-black dim pointer f5 dib"}," Register"))},L=a(16),U=a.n(L),R=a(17),B=a.n(R),F=(a(31),function(){return i.a.createElement("div",{className:"center ma3 mt0"},i.a.createElement(U.a,{options:{max:20},style:{height:150,width:150}},i.a.createElement("div",{className:"Tilt-inner pa2"},i.a.createElement("img",{alt:"Logo",src:B.a}))))}),_=(a(32),function(e){var t=e.name,a=e.entries;return i.a.createElement("div",{className:"flex flex-column justify-center"},i.a.createElement("div",{className:"white f3"},"".concat(t," , your current entry count is...")),i.a.createElement("div",{className:"white f1"},a))}),P=(a(33),a(18)),J=function(e){var t=e.onInputChange,a=e.onInputFocus,n=e.onInputBlur,s=e.onButtonSubmit,o=e.onButtonClick,r=e.input,l=e.handleKeyUp,c=e.OnImageUpload,m=e.isImageLoaded;return i.a.createElement("div",{className:"ma4 mt0"},i.a.createElement("p",{className:"light-yellow f4 mt4 mb3"},"My Owl will detect faces in your pictures. Give it a shot!"),i.a.createElement("div",{className:"flex flex-row bg-black-10 br2 ba b--black-10 form center pa3 shadow-5"},i.a.createElement("div",{className:"inputs flex flex-column w-75"},i.a.createElement("input",{className:"flex f5 light-silver pa2 w-75 center mb3",type:"text",value:r,onFocus:a,onKeyUp:l,onChange:t}),i.a.createElement("div",{className:"flex flex-row upload-btn-wrapper center grow dib pointer"},i.a.createElement("button",{className:"btn f5 ph3 pv2 dib white-80 bg-near-black pointer"},"Browse for Image"),i.a.createElement("input",{onClick:o,className:"upload-input pointer ",type:"file",accept:"image/*",placeholder:"Browse",onChange:c}),m?i.a.createElement("div",{className:"pa2"},i.a.createElement(P.Checkmark,{size:40})):null)),i.a.createElement("div",{className:"h-50"},i.a.createElement("button",{onBlur:n,className:"grow f4 link ph5 pv4 dib white-80 bg-near-black",onClick:s},"Detect"))))},D=(a(37),function(e){var t=e.imageURL,a=e.box;return i.a.createElement("div",{className:"center ma"},i.a.createElement("div",{className:"absolute mt3 mb3 shadow-3"},i.a.createElement("img",{id:"inputimage",alt:"",src:t,width:"450px",height:"auto"}),i.a.createElement("div",{className:"bounding-box",style:{top:a.topRow,right:a.rightCol,bottom:a.bottomRow,left:a.leftCol}})))}),K=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){document.getElementById("success").scrollIntoView()}},{key:"render",value:function(){return i.a.createElement("div",{id:"success",className:"f1 white mb1"},i.a.createElement("h1",{className:"mv3"},"Great Success!"))}}]),t}(i.a.Component),T=function(e){var t=e.name,a=e.entries,n=e.input,s=e.onInputChange,o=e.onInputFocus,r=e.onInputBlur,l=e.onButtonSubmit,c=e.onButtonClick,m=e.handleKeyUp,u=e.OnImageUpload,d=e.isFaceFound,p=e.box,h=e.imageURL,g=e.isImageLoaded;return i.a.createElement("div",{className:"flex flex-column flex-wrap mv2"},i.a.createElement(F,null),i.a.createElement(_,{name:t,entries:a}),i.a.createElement(J,{input:n,onInputChange:s,onInputFocus:o,onInputBlur:r,onButtonSubmit:l,handleKeyUp:m,OnImageUpload:u,isImageLoaded:g,onButtonClick:c}),!0===d?i.a.createElement("div",null,i.a.createElement(K,null)):null,i.a.createElement(D,{box:p,imageURL:h}))},q={particles:{number:{value:60,density:{enable:!0,value_area:1e3}},line_linked:{enable:!1,opacity:.02},move:{direction:"right",speed:.05},size:{value:1},opacity:{anim:{enable:!0,speed:1,opacity_min:.05}}},retina_detect:!0},z="Please paste an image URL here",M={input:z,imageURL:"",uploadURL:"",box:{},route:"signin",isSignedIn:!1,isFaceFound:!1,isImageLoaded:!1,isDetectingFaces:!1,user:{id:"",name:"",email:"",entries:0,joined:""}},W=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(u.a)(this,Object(d.a)(t).call(this))).loadUser=function(t){e.setState({user:{id:t.id,name:t.name,email:t.email,entries:t.entries,joined:t.joined}})},e.calculateFaceLocation=function(e){var t=e.outputs[0].data.regions[0].region_info.bounding_box,a=document.getElementById("inputimage"),n=Number(a.width),i=Number(a.height);return{leftCol:t.left_col*n,rightCol:(1-t.right_col)*n,topRow:t.top_row*i,bottomRow:(1-t.bottom_row)*i}},e.displayFaceBox=function(t){e.setState({box:t})},e.onInputChange=function(t){e.setState({input:t.target.value})},e.onInputFocus=function(){e.setState({input:""})},e.onInputBlur=function(){e.setState({input:"Please paste an image URL here"})},e.onButtonClick=function(){e.setState({isImageLoaded:!1})},e.OnImageUpload=function(t){var a,n,i,s;return l.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return a=t.target.files,(n=new FormData).append("file",a[0]),n.append("upload_preset","faceowl"),e.setState({loadingImage:!0}),o.next=7,l.a.awrap(fetch("https://api.cloudinary.com/v1_1/dt94ijbsb/image/upload",{method:"POST",body:n}));case 7:return i=o.sent,o.next=10,l.a.awrap(i.json());case 10:s=o.sent,e.setState({isImageLoaded:!0,uploadURL:s.secure_url});case 12:case"end":return o.stop()}}))},e.onButtonSubmit=function(){var t="";t=e.state.input!==z?e.state.input:e.state.uploadURL,e.setState({imageURL:t,isFaceFound:!1},(function(){fetch("https://agile-eyrie-66946.herokuapp.com/imageURL",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({input:e.state.imageURL})}).then((function(e){return e.json()})).then((function(t){"unable to work with Clarifai API"!==t?(fetch("https://agile-eyrie-66946.herokuapp.com/image",{method:"put",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e.state.user.id})}).then((function(e){return e.json()})).then((function(t){e.setState(Object.assign(e.state.user,{entries:t}))})).catch(console.log),e.setState({isFaceFound:!0}),e.displayFaceBox(e.calculateFaceLocation(t))):(e.setState({isFaceFound:!1,input:"Please paste an image URL here"}),alert("Sorry something went wrong, please try again"))})).catch((function(e){return console.log(e)}))}))},e.handleKeyUp=function(t){13===t.keyCode&&e.onButtonSubmit()},e.onRouteChange=function(t){"signout"===t?(sessionStorage.removeItem("userLog"),e.setState(M)):"home"===t&&e.setState({isSignedIn:!0}),e.setState({route:t})},e.state=M,e.onButtonSubmit=e.onButtonSubmit.bind(Object(p.a)(e)),e}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.state,t=e.imageURL,a=e.box,n=e.route,s=e.isSignedIn,o=e.isFaceFound,r=e.isImageLoaded;return i.a.createElement("div",{className:"App"},i.a.createElement(b.a,{className:"particles",params:q}),i.a.createElement(O,{isSignedIn:s,onRouteChange:this.onRouteChange}),"home"===n?i.a.createElement(T,{name:this.state.user.name,entries:this.state.user.entries,input:this.state.input,onInputChange:this.onInputChange,onInputFocus:this.onInputFocus,onInputBlur:this.onInputBlur,onButtonSubmit:this.onButtonSubmit,handleKeyUp:this.handleKeyUp,OnImageUpload:this.OnImageUpload,box:a,imageURL:t,isFaceFound:o,isImageLoaded:r,onButtonClick:this.onButtonClick}):"signin"===n||"signout"===this.state.route?i.a.createElement(I,{loadUser:this.loadUser,onRouteChange:this.onRouteChange}):i.a.createElement(j,{loadUser:this.loadUser,onRouteChange:this.onRouteChange}))}}]),t}(n.Component);a(38),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(W,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[19,1,2]]]);
//# sourceMappingURL=main.0957f7a8.chunk.js.map